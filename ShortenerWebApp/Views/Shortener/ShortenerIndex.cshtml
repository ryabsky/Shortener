@using System.Web.Mvc
@using System.Web.Mvc.Html

@model ShortenerWebApp.Models.Link

@{
    Layout = null;
}

<link href="@Url.Content("~/Content/core.css")" rel="stylesheet" />
<script src="@Url.Content("~/scripts/jquery-3.1.1.min.js")"></script>
<script src="@Url.Content("~/scripts/knockout-3.4.2.js")"></script>
<script src="@Url.Content("~/scripts/core.js?a=1")" type="text/javascript"></script>
<script src="@Url.Content("~/scripts/bootstrap.min.js")" type="text/javascript"></script>
<link href="@Url.Content("~/Content/bootstrap.min.css")" rel="stylesheet" type="text/css" />
<link href="@Url.Content("~/Content/bootstrap-theme.min.css")" rel="stylesheet" type="text/css" />

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Ryabsky Shortener</title>
</head>
<body class="main-content">
<form method="POST">
    <div >
        <div>
            <label class="form-label">Url:</label>
            <input class="input-sm input-nr" type="text" id="txtUrl" name="txtUrl" data-bind="value: Link.Url"/>
            <span data-bind='visible: HasError, text: ValidationMessage'> </span>
        </div>
        <div>
            <label class="form-label">Short Url:</label>
            <input class="input-sm input-nr" type="text" id="txtShortUrl" name="txtShortUrl" data-bind="value: Link.ShortUrl" disabled="disabled"/>
        </div>
        <div>
            <input class="btn btn-primary"  type="button" id="btnSubmit" value="Submit" data-bind="click: submit"/>
            <input class="btn btn-secondary" type="button" id="btnReset" value="Reset" data-bind="click: reset"/>
        </div>


    </div>
</form>
<span data-bind="visible: !Loaded()">Loading list of links...</span>

<table class="table-striped link-row" data-bind="visible: Loaded">
    <thead>
    <tr>
        <th>Url</th>
        <th>Short Url</th>
        <th>Clicks</th>
    </tr>
    </thead>
    <tbody data-bind="foreach: ExistingLinks">
    <tr>
        <td class="cell-url">
            <span data-bind="text: Url"></span>
        </td>
        <td class="cell-short-url">
            <a data-bind="attr: { href: ShortUrl }, text: ShortUrl"></a>
        </td>
        <td class="cell-short-url">
            <span data-bind="text: Clicks"></span>
        </td>
    </tr>
    </tbody>
</table>

</body>
</html>
